@tailwind base;
@tailwind components;
@tailwind utilities;

/* ================= THEME VARIABLES (LIGHT/DARK) ================= */
:root {
  color-scheme: light dark;

  /* LIGHT — off-white, dịu mắt */
  --bg: #f5f7fb;
  --panel: #ffffff;
  --text: #0b1220;
  --muted: #6b7280;
  --border: rgba(2, 6, 23, 0.10);
  --chip-bg: rgba(2, 6, 23, 0.06);
  --bubble-bg: rgba(255, 255, 255, 0.95);
  --bubble-text: #0b1220;
  --brand: #364fc7;
  --brand-soft: #94a3ff;
}
.dark {
  /* DARK — xám trung tính */
  --bg: #1f2937;      /* slate-700-ish */
  --panel: #2a3140;   /* xám trung */
  --text: #e5e7eb;
  --muted: #9aa4b2;
  --border: rgba(255,255,255,0.12);
  --chip-bg: rgba(255,255,255,0.06);
  --bubble-bg: rgba(42,49,64,0.92);
  --bubble-text: #e5e7eb;
  --brand: #94a3ff;
  --brand-soft: #c7d2fe;
}

/* ================= GLOBAL ================= */
body {
  font-family: system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  background: var(--bg);
  color: var(--text);
}

::selection { background: var(--brand); color: #fff; }

/* container helper (v3 cho phép @apply responsive) */
.container { @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8; }

/* smooth transitions on theme switch */
* { transition: background-color .25s ease, border-color .25s ease, color .25s ease; }

/* ===== Blob background ===== */
.fx-blob {
  position: absolute;
  inset: -20% auto auto -10%;
  width: 48rem; height: 48rem;
  border-radius: 9999px;
  filter: blur(60px); opacity: .5; pointer-events: none;
  background: radial-gradient(closest-side, rgba(99,102,241,.35), transparent 70%);
  animation: blobFloat 18s ease-in-out infinite;
}
.dark .fx-blob { background: radial-gradient(closest-side, rgba(99,102,241,.18), transparent 70%); }

@keyframes blobFloat {
  0%,100% { transform: translate(0,0) scale(1); }
  25% { transform: translate(10%, -4%) scale(1.05); }
  50% { transform: translate(18%, 6%) scale(1.02); }
  75% { transform: translate(6%, 10%) scale(1.06); }
}

/* minor helpers */
.fancy-underline { background: linear-gradient(currentColor, currentColor) left bottom/0 2px no-repeat; transition: background-size .4s; }
.fancy-underline:hover { background-size: 100% 2px; }
.glow:hover { box-shadow: 0 0 0 2px rgba(59,91,219,.18), 0 10px 35px rgba(59,91,219,.22); }

/* hide horizontal scrollbar look */
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

/* perspective container for 3D */
.perspective { perspective: 1200px; }

/* ================= Swiper theming ================= */
.swiper-button-next, .swiper-button-prev {
  color: var(--brand);
  filter: drop-shadow(0 6px 18px rgba(0,0,0,.2));
}
.dark .swiper-button-next, .dark .swiper-button-prev { color: var(--brand-soft); }

.swiper-pagination-bullet { background: #cfd9ff; opacity: .7; }
.swiper-pagination-bullet-active { background: var(--brand); opacity: 1; }
.dark .swiper-pagination-bullet { background: #384477; }
.dark .swiper-pagination-bullet-active { background: var(--brand-soft); }
.swiper-slide { will-change: transform; }

/* decorative divider */
.section-divider { height: 12px; background: linear-gradient(90deg, #cfd9ff33, transparent 30%, transparent 70%, #cfd9ff33); }
.dark .section-divider { background: linear-gradient(90deg, #3b5bdb33, transparent 30%, transparent 70%, #3b5bdb33); }

/* shake */
@keyframes shake {
  0%,100% { transform: translateX(0) }
  20% { transform: translateX(-4px) }
  40% { transform: translateX(4px) }
  60% { transform: translateX(-3px) }
  80% { transform: translateX(3px) }
}

/* ================= HERO ================= */
.spotlight {
  position: absolute; inset: 0; z-index: -1;
  background:
    radial-gradient(500px 300px at var(--mx, 50%) var(--my, 40%), rgba(255,255,255,.06), transparent 60%),
    radial-gradient(900px 600px at 20% -10%, rgba(59,91,219,.18), transparent 60%);
  transition: background-position .15s ease;
}

.btn-primary {
  @apply inline-flex items-center justify-center rounded-2xl px-5 py-3 text-white font-medium;
  @apply bg-gradient-to-r from-pink-500 to-amber-400 shadow-card border border-white/[.10];
}
.btn-ghost {
  @apply inline-flex items-center justify-center rounded-2xl px-5 py-3 font-medium;
  @apply border border-white/[.20] text-white/90 hover:bg-white/[.05];
}
/* Light override cho ghost button */
html:not(.dark) .btn-ghost{
  color: var(--text) !important;
  border-color: var(--border) !important;
  background: rgba(2,6,23,.02) !important;
}
html:not(.dark) .btn-ghost:hover { background: rgba(2,6,23,.06) !important; }

.shine { position: relative; overflow: hidden; }
.shine::after{
  content:""; position:absolute; inset:0; opacity:.0; transform: translateX(-120%);
  background: linear-gradient(120deg, transparent 0%, rgba(255,255,255,.35) 50%, transparent 100%);
}
.shine:hover::after{ opacity:1; transform: translateX(120%); transition: transform .8s ease, opacity .2s ease; }

/* dark headings subtle glow */
.dark h2, .dark h1 { text-shadow: 0 2px 22px rgba(59,91,219,.18); }

/* chip với dấu chấm */
.chip-dot { position: relative; padding-left: 14px; }
.chip-dot::before{
  content:""; position:absolute; left:0; top:50%; transform: translateY(-50%);
  width:8px; height:8px; border-radius:9999px; background:#fb7185; box-shadow:0 0 12px rgba(251,113,133,.55);
}

/* Hero right cards */
.hero-card {
  @apply rounded-2xl p-3 bg-white/[.08] backdrop-blur-xl border border-white/[.15];
  transition: transform .25s ease, box-shadow .25s ease;
}
.hero-card:hover { transform: translateY(-4px); }
.hero-img { transition: transform .7s ease; }
.hero-card:hover .hero-img { transform: scale(1.04); }
/* Light hero-card rõ ràng hơn */
html:not(.dark) .hero-card{
  background: rgba(255,255,255,.85) !important;
  border-color: rgba(15,23,42,.08) !important;
  color: var(--text) !important;
  backdrop-filter: saturate(1.1) blur(10px);
}

/* scroll mouse indicator */
.scroll-mouse { width:28px; height:44px; border-radius:9999px; border:2px solid rgba(255,255,255,.45); position:relative; opacity:.9; }
.scroll-mouse .wheel{
  position:absolute; left:50%; top:8px; width:4px; height:8px; border-radius:9999px;
  transform: translateX(-50%); background: rgba(255,255,255,.8); animation: wheel 1.6s ease-in-out infinite;
}
@keyframes wheel{
  0% { transform: translate(-50%,0); opacity:1; }
  60%{ transform: translate(-50%,12px); opacity:.2; }
  100%{ transform: translate(-50%,0); opacity:0; }
}
.drop-shadow{ filter: drop-shadow(0 2px 10px rgba(0,0,0,.35)); }
@media (max-width:1024px){ .scroll-mouse{ margin-top:8px; } }

/* Backdrop đẹp + blur */
.modal-blur{
  background:
    radial-gradient(1200px 600px at 10% -10%, rgba(59,91,219,.20), transparent 60%),
    radial-gradient(1000px 600px at 90% 110%, rgba(250,204,21,.12), transparent 60%),
    rgba(2,6,23,.65);
  backdrop-filter: blur(6px);
}

/* aura */
.aura{
  background:
    radial-gradient(600px 240px at 50% 0%, rgba(59,91,219,.25), transparent 60%),
    radial-gradient(800px 280px at 50% 100%, rgba(250,204,21,.18), transparent 60%);
  filter: blur(20px); animation: auraPulse 4s ease-in-out infinite alternate;
}
@keyframes auraPulse{ from{ opacity:.6; transform: scale(1);} to{opacity:.85; transform: scale(1.03);} }
.drop-curve{ filter: url(#blurGlow); opacity:.75; }

/* avatar */
.char-shadow{ width:44px; height:10px; margin:auto; border-radius:9999px; background: radial-gradient(closest-side, rgba(0,0,0,.35), transparent 70%); filter: blur(4px); transform: translateY(16px); }
.char-bob{ animation: bob 2.2s ease-in-out infinite; }
@keyframes bob{ 0%,100%{transform: translateY(0)} 50%{transform: translateY(-4px)} }
.char-icon{ position:relative; }
.char-img{
  width:42px; height:42px; border-radius:9999px; object-fit:cover; border:2px solid rgba(255,255,255,.8);
  box-shadow:0 10px 25px rgba(0,0,0,.35); animation: bob 2.2s ease-in-out infinite;
}
.char-shadow{ position:absolute; left:50%; bottom:-2px; transform: translateX(-50%); width:38px; height:8px; border-radius:9999px; background: radial-gradient(closest-side, rgba(0,0,0,.35), transparent 70%); filter: blur(2px); }

/* event dot */
.event-dot .dot{
  display:block; width:12px; height:12px; border-radius:9999px; background:#3b5bdb; position:relative;
  box-shadow: 0 0 0 4px rgba(59,91,219,.25);
}
.event-dot .dot::after{
  content:""; position:absolute; inset:-6px; border-radius:9999px; border:2px solid rgba(59,91,219,.35); animation: pulse 1.8s ease-out infinite;
}
@keyframes pulse{ 0%{ transform: scale(.8); opacity:.8 } 100%{ transform: scale(1.4); opacity:0 } }

/* ================= Puppet styles ================= */
.puppet{ position:relative; width:120px; height:160px; transform-origin:50% 50%; }
.puppet .bar{
  position:absolute; top:-10px; left:50%; transform: translateX(-50%); width:120px; height:6px; border-radius:6px;
  background: linear-gradient(90deg, #ffffffaa, #ffffff44); box-shadow: 0 6px 18px rgba(0,0,0,.25);
}
.puppet .strings .s{ position:absolute; top:-6px; width:2px; height:54px; background: rgba(255,255,255,.65); box-shadow: 0 0 0 1px rgba(255,255,255,.15) inset; }
.puppet .s1{ left:26px } .puppet .s2{ left:60px } .puppet .s3{ left:94px }
.puppet .body{ position:absolute; top:48px; left:50%; transform: translateX(-50%); }
.puppet .body.bob{ animation: bodyBob 2s ease-in-out infinite; }
@keyframes bodyBob{ 0%,100%{ transform: translate(-50%,0)} 50%{ transform: translate(-50%,-4px)} }
.puppet .head{
  width:36px; height:36px; border-radius:9999px; margin:0 auto; background: linear-gradient(#ffe6c7, #ffd2a6);
  border:2px solid rgba(0,0,0,.1); position:relative; transform-origin:50% 100%; animation: headNod 2.2s ease-in-out infinite;
}
@keyframes headNod{ 0%,100%{ transform: rotate(0)} 50%{ transform: rotate(-2deg)} }
.puppet .eye{ position:absolute; top:13px; width:6px; height:6px; border-radius:9999px; background:#222; }
.puppet .eye.left{ left:10px } .puppet .eye.right{ right:10px }
.puppet .eye::after{ content:""; position:absolute; inset:0; background:#ffd2a6; border-radius:9999px; animation: blink 3.6s ease-in-out infinite; }
@keyframes blink{ 0%,92%,100%{ transform: scaleY(0)} 95%{ transform: scaleY(1)} }
.puppet .torso{
  width:46px; height:52px; margin:6px auto 0; border-radius:12px; background: linear-gradient(180deg, #6d8cff, #3b5bdb);
  border:2px solid rgba(255,255,255,.35); box-shadow: 0 6px 16px rgba(59,91,219,.35) inset;
}
.puppet .arm, .puppet .leg{
  position:absolute; left:50%; transform-origin: top center; width:10px; height:40px; margin-left:-5px; border-radius:8px;
  background: linear-gradient(#ffe6c7, #ffd2a6); border:2px solid rgba(0,0,0,.06);
}
.puppet .arm.left{ top:76px; margin-left:-28px } .puppet .arm.right{ top:76px; margin-left:18px }
.puppet .leg.left{ top:118px; margin-left:-14px; height:44px; background:#333; }
.puppet .leg.right{ top:118px; margin-left:6px;  height:44px; background:#333; }
.puppet .arm.walk.left{ animation: swingLeft .9s ease-in-out infinite; }
.puppet .arm.walk.right{ animation: swingRight .9s ease-in-out infinite; }
.puppet .leg.walk.left{ animation: legLeft .9s ease-in-out infinite; }
.puppet .leg.walk.right{ animation: legRight .9s ease-in-out infinite; }
@keyframes swingLeft{ 0%,100%{ transform: rotate(20deg)} 50%{ transform: rotate(-30deg)} }
@keyframes swingRight{ 0%,100%{ transform: rotate(-20deg)} 50%{ transform: rotate(30deg)} }
@keyframes legLeft{ 0%,100%{ transform: rotate(-10deg)} 50%{ transform: rotate(18deg)} }
@keyframes legRight{ 0%,100%{ transform: rotate(10deg)} 50%{ transform: rotate(-18deg)} }
.puppet .arm.wave{ animation: wave .6s ease-in-out 0s 2; transform-origin: top center; }
@keyframes wave{ 0%{ transform: rotate(-10deg)} 50%{ transform: rotate(40deg)} 100%{ transform: rotate(-10deg)} }

/* FX small */
.puppet.fx{ position:relative; width:84px; height:110px; transform-origin:50% 50%; }
.puppet.fx.small{ transform: translate(-50%,-50%) scale(.95); }
.puppet.fx::before{
  content:""; position:absolute; top:-10px; left:50%; transform: translateX(-50%); width:84px; height:5px; border-radius:6px;
  background: linear-gradient(90deg, #ffffffaa, #ffffff44); box-shadow: 0 6px 18px rgba(0,0,0,.25);
}
.puppet.fx .string{ position:absolute; top:-6px; width:2px; height:42px; background: rgba(255,255,255,.65); }
.puppet.fx .string.s1{ left:18px; animation: sway 2.6s ease-in-out infinite; transform-origin: top; }
.puppet.fx .string.s2{ left:41px; animation: sway 3s ease-in-out infinite .2s; transform-origin: top; }
.puppet.fx .string.s3{ left:64px; animation: sway 2.8s ease-in-out infinite .1s; transform-origin: top; }
@keyframes sway{ 0%,100%{ transform: rotate(-2deg)} 50%{ transform: rotate(2deg)} }
/* ... (các phần FX nhỏ giữ nguyên như bản gốc) ... */

/* ===== Popup có ảnh cover ===== */
.popup-card{
  border-radius:16px; padding:14px 16px;
  background: linear-gradient(180deg, rgba(17,24,39,.72), rgba(17,24,39,.6));
  border:1px solid rgba(255,255,255,.12); backdrop-filter: blur(14px);
  box-shadow: 0 20px 60px -10px rgba(59,91,219,.35); overflow-wrap:anywhere;
}
.popup-cover{
  width:100%; aspect-ratio:16/9; object-fit:cover; border-radius:12px; margin-bottom:10px;
  box-shadow: 0 10px 24px rgba(0,0,0,.28);
}
.popup-tail{
  position:absolute; width:14px; height:14px; background: rgba(17,24,39,.7); backdrop-filter: blur(14px);
  border-left:1px solid rgba(255,255,255,.14); border-top:1px solid rgba(255,255,255,.14);
  transform: translateY(-50%) rotate(45deg); filter: drop-shadow(0 8px 18px rgba(0,0,0,.25));
}
.popup-tail.left{ right:-7px; } .popup-tail.right{ left:-7px; }

/* ===== Aurora + Spotlight + Progress ===== */
.stage-aurora{ position:relative; }
.stage-aurora::before{
  content:""; position:absolute; inset:-10%;
  background:
    radial-gradient(820px 320px at 18% 12%, rgba(124,137,248,.18), transparent 60%),
    radial-gradient(980px 360px at 88% 88%, rgba(250,204,21,.14), transparent 60%);
  filter: blur(6px); animation: auroraMove 18s ease-in-out infinite alternate; pointer-events:none;
}
@keyframes auroraMove{ 0%{ transform: translateY(-2%) scale(1)} 50%{ transform: translateY(1%) scale(1.02)} 100%{ transform: translateY(-1%) scale(1.01)} }

.has-puppet-spotlight::after{
  content:""; position:absolute; inset:0; pointer-events:none;
  background: radial-gradient(360px 200px at var(--px,80%) var(--py,20%), rgba(124,137,248,.18), transparent 60%);
  transition: background .12s linear;
}
.puppet-progress{
  position:absolute; left:0; top:0; height:3px; width:var(--prog,0);
  background: linear-gradient(90deg, var(--accent,#7c89f8), #ffd166);
  box-shadow: 0 0 18px color-mix(in srgb, var(--accent,#7c89f8) 70%, transparent); z-index:20;
}

/* ================= THEATER STAGE ================= */
.theater-stage{
  position:relative; min-height:520px;
  background: var(--panel);
  --sweep: 0%;
  border-color: var(--border) !important;
}
.theater-backdrop{ position:absolute; inset:0; opacity:.95; }
/* Light backdrop dịu */
html:not(.dark) .theater-backdrop{
  background:
    radial-gradient(680px 320px at 50% 35%, rgba(124,137,248,.10), transparent 60%),
    radial-gradient(980px 420px at 80% 85%, rgba(255,209,102,.10), transparent 60%),
    linear-gradient(180deg, #f7f9ff 0%, #eef2fb 60%);
}
/* Dark backdrop */
.dark .theater-backdrop{
  background:
    radial-gradient(680px 320px at 50% 35%, rgba(124,137,248,.18), transparent 60%),
    radial-gradient(980px 420px at 80% 85%, rgba(255,209,102,.12), transparent 60%),
    linear-gradient(180deg, #0c1530 0%, #0a0f1e 60%);
}

.theater-floor{
  position:absolute; left:0; right:0; bottom:0; height:120px;
  background: linear-gradient(180deg, transparent, rgba(0,0,0,.25)),
              repeating-linear-gradient(90deg, #3b2b1c, #3b2b1c 20px, #4b3522 20px, #4b3522 40px);
  filter: blur(.2px); box-shadow: inset 0 12px 24px rgba(0,0,0,.35);
}

/* Spotlight quét ngang */
.theater-sweep{
  position:absolute; inset:0; pointer-events:none; opacity:0;
  background: radial-gradient(400px 200px at var(--sweep,0%) 30%, rgba(255,255,255,.14), transparent 60%);
  transition: opacity .4s ease;
}
.theater-sweep.on{ animation: sweep 3.4s ease-in-out forwards; opacity:1; }
@keyframes sweep{ from{ --sweep:0% } to{ --sweep:100% } }

/* Tiêu đề giữa sân khấu */
.theater-title{
  padding:12px 18px; border-radius:16px;
  background: linear-gradient(180deg, rgba(255,255,255,.06), transparent), rgba(255,255,255,.05);
  backdrop-filter: blur(10px);
  border:1px solid rgba(255,255,255,.12);
  box-shadow: 0 18px 60px -12px rgba(59,91,219,.35);
}

/* Rối vào sân khấu */
.theater-puppet{
  position:absolute; left:50%; top:30%;
  transform: translate(-50%, -60%) scale(.92) rotate(-6deg);
  transition: transform 1s cubic-bezier(.2,.8,.2,1), opacity .6s ease;
  opacity:0; z-index:22;
}
.theater-puppet.enter{ transform: translate(-50%, -40%) scale(1) rotate(-2deg); opacity:1; }

/* ====== CURTAINS ====== */
.curtain{
  position:absolute; top:0; bottom:0; width:55%; z-index:30;
  background: radial-gradient(80px 200px at 30% 0%, rgba(0,0,0,.25), transparent 60%),
              repeating-linear-gradient(90deg, #7f0b1b, #7f0b1b 20px, #9b0f23 20px, #9b0f23 40px);
  box-shadow: inset -12px 0 24px rgba(0,0,0,.35);
}
.curtain-left{ left:0; border-right:1px solid rgba(255,255,255,.08); }
.curtain-right{ right:0; border-left:1px solid rgba(255,255,255,.08); }
.valance-top{
  position:absolute; left:0; right:0; top:0; height:64px; z-index:31;
  background: radial-gradient(120px 40px at 10% 100%, rgba(0,0,0,.25), transparent 60%),
              repeating-linear-gradient(90deg, #7f0b1b, #7f0b1b 20px, #9b0f23 20px, #9b0f23 40px);
  border-bottom:1px solid rgba(255,255,255,.08); box-shadow: 0 8px 18px rgba(0,0,0,.35);
  border-bottom-left-radius:18px; border-bottom-right-radius:18px;
}

/* ===== CINEMATIC INTRO ===== */
.cinematic-intro{ position:absolute; inset:0; z-index:26; display:flex; flex-direction:column; align-items:center; }
.intro-lens{
  position:absolute; top:6%; left:-30%; width:120px; bottom:78%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.36), transparent);
  filter: blur(6px); transform: rotate(12deg); pointer-events:none;
}
.intro-title-wrap{ margin-top:18px; text-align:center; pointer-events:none; }
.intro-tag{ font-size:10px; letter-spacing:.3em; color: rgba(255,255,255,.75); text-transform: uppercase; }
.intro-title{ margin-top:4px; font-weight:800; color:#fff; font-size:26px; text-shadow: 0 6px 28px rgba(0,0,0,.35); }
@media(min-width:768px){ .intro-title{ font-size:32px; } }
.intro-chips{ display:flex; gap:8px; margin-top:6px; }
.chip{
  padding:6px 10px; border-radius:9999px; background: rgba(255,255,255,.1);
  border:1px solid rgba(255,255,255,.15); color:#fff; font-size:11px; backdrop-filter: blur(8px);
}
/* Light chips/counters/map-tag chữ tối */
html:not(.dark) .chip,
html:not(.dark) .map-tag,
html:not(.dark) .intro-counter{
  color: var(--text) !important;
  background: rgba(255,255,255,.9) !important;
  border-color: var(--border) !important;
}

.intro-holo{ position:absolute; inset:80px 40px auto 40px; height:220px; border-radius:18px; overflow:hidden;
  background: radial-gradient(800px 220px at 50% 50%, rgba(124,137,248,.12), transparent 60%);
  border:1px solid rgba(255,255,255,.1); box-shadow: inset 0 0 60px rgba(124,137,248,.16); pointer-events:none; }
.intro-holo-svg{ width:100%; height:100%; }
.intro-holo-label{ color:#cfd7ff; font-size:12px; background: rgba(12,18,40,.55); border:1px solid rgba(255,255,255,.12); padding:2px 6px; border-radius:8px; }
.intro-film{ position:absolute; left:40px; right:40px; bottom:110px; height:92px; overflow:hidden; mask-image: linear-gradient(90deg, transparent, #000 8%, #000 92%, transparent); }
.intro-film-track{ display:flex; gap:10px; align-items:center; }
.intro-frame{ width:160px; height:92px; border-radius:10px; overflow:hidden; background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); box-shadow: 0 10px 24px rgba(0,0,0,.25); }
.intro-frame img{ width:100%; height:100%; object-fit:cover; display:block; }

.intro-counters{ position:absolute; right:24px; top:24px; display:flex; gap:12px; }
.intro-counter{
  min-width:92px; padding:8px 10px; border-radius:12px; background: rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.15); backdrop-filter: blur(10px); text-align:center; color:#fff;
}
.intro-counter .num{ font-size:22px; font-weight:800; line-height:1; }
.intro-counter .lbl{ font-size:11px; opacity:.85; }
.intro-counter .suffix{ opacity:.9; }

.intro-narrator{ position:absolute; left:50%; bottom:150px; transform: translateX(-50%); max-width:560px; text-align:center; }
.intro-narrator .bubble{
  display:inline-block; padding:10px 14px; color:#e8edff; font-size:13px;
  background: linear-gradient(180deg, rgba(17,24,39,.72), rgba(17,24,39,.6));
  border:1px solid rgba(255,255,255,.12); border-radius:14px; backdrop-filter: blur(12px);
  box-shadow: 0 18px 60px -10px rgba(59,91,219,.35);
}

/* ===== Stage size ===== */
.stage-wide{ height: clamp(420px, 62vh, 720px); }
@media (min-width:1024px){ .stage-wide{ height: clamp(460px, 60vh, 780px); } }

/* --- Puppet fixed left & bubble follow head --- */
.puppet-wrap{ position:absolute; left:24px; top:50%; transform: translateY(-50%); z-index:22; }
.puppet-wrap.enter{ animation: popIn .45s ease both; }
@keyframes popIn{ from{ opacity:0; transform: translateY(calc(-50% + 6px)) } to{ opacity:1; transform: translateY(-50%) } }
.puppet-wrap .puppet-scale{ transform-origin: top left; transform: scale(var(--puppet-scale,1.7)); }

/* ✅ Kích thước cho SVG rối – QUAN TRỌNG */
.puppet-svg{ width:110px; height:140px; display:block; }

/* Bong bóng bám theo rối (PHẢI đầu) */
.puppet-wrap>.puppet-bubble{
  position:absolute;
  left: calc(120px * var(--puppet-scale,1.7)) !important;
  top:  calc(40px  * var(--puppet-scale,1.7)) !important;
  transform: translate(12px, -100%);
  padding:10px 12px; border-radius:14px;
  background: var(--bubble-bg);
  border:1px solid var(--border);
  color: var(--bubble-text);
  box-shadow: 0 18px 60px -10px rgba(59,91,219,.35);
  white-space: pre-wrap; line-height:1.35; z-index:23;
  min-width:260px; width: clamp(260px, 32vw, 560px);
}
.puppet-wrap>.puppet-bubble .bubble-text strong{ color:inherit; font-weight:800; }
.puppet-wrap>.puppet-bubble .caret{ margin-left:2px; animation: caretBlink 1s steps(1) infinite; }
@keyframes caretBlink{ 50%{ opacity:.1 } }

/* Map box */
.map-box{
  border-radius:18px;
  background: radial-gradient(600px 260px at 50% 50%, rgba(124,137,248,.12), transparent 60%);
  border:1px solid rgba(255,255,255,.1);
  box-shadow: inset 0 0 60px rgba(124,137,248,.16);
  overflow:hidden; position:relative; z-index:10;
}
.map-svg{ width:100%; height:100%; }
.map-tag{
  display:inline-block; padding:2px 6px; font-size:12px; color:#eaf0ff;
  background: rgba(12,18,40,.55); border:1px solid rgba(255,255,255,.12); border-radius:8px;
}

/* Controls & progress */
.narration-controls{ position:absolute; left:50%; bottom:22px; transform: translateX(-50%); display:flex; gap:10px; z-index:25; }
.btn-primary.small, .btn-ghost.small{ display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:12px; font-size:13px; }
.btn-primary.small{ color:#fff; background: linear-gradient(90deg, #7c89f8, #6b7cff); border:1px solid rgba(255,255,255,.15); }
.btn-ghost.small{ color:#fff; background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.15); }
.btn-ghost.small[disabled]{ opacity:.5; pointer-events:none; }

.narration-progress{
  position:absolute; left:24px; right:24px; bottom:70px; height:6px; border-radius:999px;
  background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12); overflow:hidden; z-index:24;
}
.narration-progress .bar{ height:100%; background: linear-gradient(90deg, #7c89f8, #facc15); width:0; }

/* Fix label text for scene chips */
.scene-chip>span:not(.dot):not(.label-text){ display:none; }
.scene-chip .label-text{ margin-left:6px; font-weight:600; color: var(--text); }

/* ✅ Animation cho các phần SVG (thay cho SMIL) */
.puppet-svg .body-bob, .puppet-svg .arm-left-swing, .puppet-svg .leg-left-swing, .puppet-svg .leg-right-swing, .puppet-svg .shadow-breathe, .puppet-svg .eye-blink{
  transform-box: fill-box; transform-origin: center;
}
.puppet-svg .body-bob{ animation: bodyBobSvg 2.2s ease-in-out infinite; }
@keyframes bodyBobSvg{ 0%,100%{ transform: translateY(0)} 50%{ transform: translateY(-2px)} }
.puppet-svg .arm-left-swing{ transform-origin: top left; animation: armLeftSwing 1.6s ease-in-out infinite; }
@keyframes armLeftSwing{ 0%,100%{ transform: rotate(-8deg)} 50%{ transform: rotate(6deg)} }
.puppet-svg .leg-left-swing{ transform-origin: top center; animation: legLeftSwing 1.9s ease-in-out infinite; }
.puppet-svg .leg-right-swing{ transform-origin: top center; animation: legRightSwing 1.9s ease-in-out infinite; }
@keyframes legLeftSwing{ 0%,100%{ transform: rotate(-6deg)} 50%{ transform: rotate(10deg)} }
@keyframes legRightSwing{ 0%,100%{ transform: rotate(6deg)} 50%{ transform: rotate(-10deg)} }
.puppet-svg .shadow-breathe{ animation: shadowBreathe 2s ease-in-out infinite; }
@keyframes shadowBreathe{ 0%,100%{ transform: scaleX(1)} 50%{ transform: scaleX(.9)} }
.puppet-svg .eye-blink{ animation: eyeBlinkSvg 3.2s ease-in-out infinite; }
@keyframes eyeBlinkSvg{ 0%,92%,100%{ transform: scaleY(1)} 95%{ transform: scaleY(.2)} }

/* rối vẫy tay & cúi chào */
.puppet-svg .arm-wave{ transform-origin: top left; animation: armWave .7s ease-in-out 0s 3; }
@keyframes armWave{ 0%{ rotate:-6deg } 50%{ rotate:36deg } 100%{ rotate:-6deg } }
.puppet-svg .body-bow{ transform-origin: 0% 0%; animation: bodyBow 1.2s ease forwards; }
@keyframes bodyBow{ 0%{ transform: rotate(0) translateY(0)} 60%{ transform: rotate(-12deg) translateY(2px)} 100%{ transform: rotate(-8deg) translateY(1px)} }

/* confetti outro */
.confetti{
  position:absolute; inset:0; pointer-events:none; opacity:0; transition: opacity .4s ease;
  background:
    radial-gradient(circle at 20% 10%, #ffd16655 0 2px, transparent 3px) 0 0/120px 120px,
    radial-gradient(circle at 60% 30%, #7c89f855 0 2px, transparent 3px) 40px 60px/120px 120px,
    radial-gradient(circle at 80% 70%, #f78c6b55 0 2px, transparent 3px) 80px 20px/120px 120px;
  filter: blur(.2px);
}
.confetti.show{ opacity:1; animation: confettiDrift 2.6s ease-in-out infinite alternate; }
@keyframes confettiDrift{ from{ transform: translateY(0)} to{ transform: translateY(8px)} }

/* Scale từ biến --puppet-scale */
.puppet-wrap .puppet-scale{ transform-origin: top left; transform: scale(var(--puppet-scale,1.7)); will-change: transform; }

/* Sprite 3D */
.puppet-sprite{
  width:120px; height:auto; display:block; image-rendering:auto;
  filter: drop-shadow(0 14px 28px rgba(0,0,0,.35)); will-change: transform; transform: translateZ(0);
}
.sprite-bar{ position:absolute; top:-18px; left:50%; transform: translateX(-50%); width:120px; height:5px; border-radius:6px; background: linear-gradient(90deg,#ffffffaa,#ffffff44); box-shadow: 0 6px 18px rgba(0,0,0,.25); }
.sprite-string{ position:absolute; top:-13px; width:2px; height:48px; background: rgba(255,255,255,.65); transform-origin: top; }
.sprite-string.s1{ left:16px; animation: sway 2.2s ease-in-out infinite; }
.sprite-string.s2{ left:50%; transform: translateX(-50%); animation: sway 2.6s ease-in-out infinite .15s; }
.sprite-string.s3{ right:16px; animation: sway 2.4s ease-in-out infinite .05s; }

/* Hiệu ứng nhẹ cho rối */
.bob{ animation: spriteBob 2.1s ease-in-out infinite; }
@keyframes spriteBob{ 0%,100%{ transform: translateY(0)} 50%{ transform: translateY(-4px)} }
.gentle-tilt{ animation: tilt 3.6s ease-in-out infinite; transform-origin: 50% 10%; }
@keyframes tilt{ 0%,100%{ rotate:0 } 50%{ rotate:-1.2deg } }

/* Motion-safe */
@media (prefers-reduced-motion: reduce){
  .bob, .gentle-tilt, .sprite-string{ animation: none !important; }
}

/* Lưới 2 cột, tránh bubble “nằm dưới” map */
.stage-inner{
  position:relative; display:grid;
  grid-template-columns: clamp(320px, 36vw, 520px) 1fr;
  gap: clamp(16px, 2vw, 28px);
  padding: clamp(16px, 2vw, 24px); z-index:10;
}
.stage-left{ position:relative; z-index:20; display:flex; align-items:flex-end; }
.stage-right{ position:relative; z-index:12; }
.puppet-show .stage-inner{ grid-template-columns: 1fr; }
.puppet-show .stage-left{ justify-content:center; align-items:flex-end; padding-bottom:130px; }
.puppet-show .stage-right{ position:absolute; inset:0; z-index:12; pointer-events:none; }

.puppet-3d{ filter: drop-shadow(0 12px 28px rgba(0,0,0,.45)) drop-shadow(0 4px 12px rgba(0,0,0,.35)); }
.puppet-3d.soft{ filter: drop-shadow(0 10px 24px rgba(0,0,0,.35)); }

/* Subtle parallax */
.scene-parallax{
  position:absolute; inset:0; pointer-events:none; z-index:1;
  background:
    radial-gradient(500px 220px at 18% 22%, rgba(124,137,248,.10), transparent 60%),
    radial-gradient(460px 220px at 82% 76%, rgba(250,204,21,.10), transparent 60%),
    radial-gradient(320px 180px at 48% 52%, rgba(59,91,219,.10), transparent 60%);
  animation: parallaxDrift 14s ease-in-out infinite alternate;
}
@keyframes parallaxDrift{
  0%{ transform: translateY(-2%) scale(1); filter: hue-rotate(0deg); }
  50%{ transform: translateY(1%) scale(1.01); filter: hue-rotate(8deg); }
  100%{ transform: translateY(-1%) scale(1.005); filter: hue-rotate(0deg); }
}

/* panel-glass */
.panel-glass{
  border-radius:14px; border:1px solid rgba(255,255,255,.14);
  background: linear-gradient(180deg, rgba(17,24,39,.65), rgba(17,24,39,.5));
  backdrop-filter: blur(12px);
  box-shadow: 0 18px 50px -12px rgba(59,91,219,.32);
}

/* spin */
.spin-slow{ animation: spin 16s linear infinite; }
@keyframes spin{ from{ transform: translate(-50%,-50%) rotate(0)} to{ transform: translate(-50%,-50%) rotate(360deg)} }

/* Scene base + chips */
.scene{ position:relative; }
.scene .scene-backdrop{ position:absolute; inset:0; z-index:0; border-radius:18px; }

/* Chips theo theme */
.scene .scene-chip{
  position:absolute; left:14px; top:14px; z-index:3; display:inline-flex; align-items:center; gap:8px;
  font-size:12px; color: var(--text); padding:6px 10px; border-radius:9999px;
  background: var(--chip-bg); border:1px solid var(--border); backdrop-filter: blur(8px);
}
.scene .scene-chip .dot{ width:8px; height:8px; border-radius:9999px; background:#22c55e; box-shadow:0 0 10px #22c55e; }

/* Act-specific backdrops (DARK mặc định) */
.scene.act-1 .scene-backdrop{
  background:
    radial-gradient(700px 340px at 20% 10%, rgba(46,204,113,.12), transparent 60%),
    radial-gradient(900px 420px at 80% 90%, rgba(255,215,0,.10), transparent 60%),
    linear-gradient(180deg, #0b1427, #0b1322);
}
.scene.act-1 .scene-parallax{ display:none; }
.scene.act-1 .puppet-bubble{ display:none; }

.scene.act-2 .scene-backdrop{
  background:
    radial-gradient(700px 340px at 20% 10%, rgba(46,204,113,.08), transparent 60%),
    radial-gradient(900px 420px at 80% 90%, rgba(225,29,72,.10), transparent 60%),
    linear-gradient(180deg, #0b1427, #0b1322);
}
.scene.act-3 .scene-backdrop{
  background:
    radial-gradient(700px 340px at 20% 10%, rgba(59,91,219,.18), transparent 60%),
    radial-gradient(900px 420px at 80% 90%, rgba(124,137,248,.12), transparent 60%),
    linear-gradient(180deg, #0b1427, #0b1322);
}
.scene.act-4 .scene-backdrop{
  background:
    radial-gradient(700px 340px at 20% 10%, rgba(14,165,233,.18), transparent 60%),
    radial-gradient(900px 420px at 80% 90%, rgba(5,150,105,.12), transparent 60%),
    linear-gradient(180deg, #0b1427, #0b1322);
}
/* Light variants dịu */
html:not(.dark) .scene.act-1 .scene-backdrop,
html:not(.dark) .scene.act-2 .scene-backdrop,
html:not(.dark) .scene.act-3 .scene-backdrop,
html:not(.dark) .scene.act-4 .scene-backdrop{
  background:
    radial-gradient(700px 340px at 20% 10%, rgba(59,91,219,.10), transparent 60%),
    radial-gradient(900px 420px at 80% 90%, rgba(255,215,0,.10), transparent 60%),
    linear-gradient(180deg, #eef2fb, #e9eef9);
}

/* Border divider (act 2) */
.border-divider{ position:absolute; left:50%; top:10px; bottom:10px; transform: translateX(-50%); z-index:2; border-left:2px dashed rgba(255,255,255,.25); }

/* scan grid */
.scan-grid{
  position:absolute; inset:0; pointer-events:none; z-index:1;
  background:
    repeating-linear-gradient(0deg, transparent 0 38px, rgba(255,255,255,.05) 38px 39px),
    repeating-linear-gradient(90deg, transparent 0 44px, rgba(255,255,255,.04) 44px 45px);
  mask-image: radial-gradient(400px 260px at 50% 50%, #000, transparent 80%);
}

/* Skyline / flags / radar / tables giữ nguyên như gốc */
.skyline-svg{ position:absolute; left:0; right:0; bottom:0; height:40%; z-index:1; filter: drop-shadow(0 12px 24px rgba(0,0,0,.25)); }
.border-posts{ position:absolute; left:50%; top:10px; bottom:10px; transform: translateX(-50%); width:70px; z-index:3; pointer-events:none; }
.border-posts .post{ position:absolute; left:50%; transform: translateX(-50%); width:34px; height:18px; }
.border-posts .post .pole{ position:absolute; left:16px; top:0; width:2px; height:18px; background: rgba(255,255,255,.7); box-shadow: 0 0 0 1px rgba(255,255,255,.2) inset; }
.border-posts .post .flag{ position:absolute; left:18px; top:2px; width:10px; height:6px; background: linear-gradient(180deg,#22c55e,#16a34a); border:1px solid rgba(255,255,255,.25); filter: drop-shadow(0 4px 8px rgba(0,0,0,.25)); }

.flag-pair{ position:absolute; left:0; right:0; top:28%; z-index:3; display:flex; justify-content:space-between; padding:0 14%; }
.flag-pair .flag-svg{ width:28px; height:auto; filter: drop-shadow(0 8px 16px rgba(0,0,0,.35)); opacity:.95; }

.radar{ position:absolute; left:50%; top:50%; transform: translate(-50%,-50%); width:260px; height:260px; z-index:2; pointer-events:none; }
.radar .ring{ position:absolute; inset:0; border-radius:9999px; border:1px solid rgba(165,243,252,.25); }
.radar .r2{ inset:20px; } .radar .r3{ inset:40px; }
.radar .sweep{ position:absolute; inset:0; border-radius:9999px; background: conic-gradient(from 0deg, rgba(56,189,248,.35), rgba(56,189,248,.0) 45%); animation: radarSpin 6s linear infinite; }
@keyframes radarSpin{ to{ transform: rotate(360deg);} }
.radar .ping{ position:absolute; width:10px; height:10px; border-radius:9999px; background:#a5f3fc; box-shadow:0 0 18px #22d3ee; animation: ping 2.6s ease-out infinite; opacity:.9; }
@keyframes ping{ 0%{ transform: scale(.4); opacity:.9 } 70%{ transform: scale(2.2); opacity:.1 } 100%{ transform: scale(2.6); opacity:0 } }

.three-border{ position:absolute; left:50%; top:8%; width:280px; height:84%; transform: translateX(-50%); z-index:1; opacity:.9; pointer-events:none; }
.radar-lottie{ position:absolute; left:50%; top:50%; transform: translate(-50%,-50%); z-index:2; mix-blend-mode: screen; opacity:.65; }

.act2-dust{
  position:absolute; inset:0; pointer-events:none; z-index:2;
  background:
    radial-gradient(12px 8px at 15% 70%, rgba(255,255,255,.08), transparent 60%),
    radial-gradient(14px 8px at 35% 75%, rgba(255,255,255,.06), transparent 60%),
    radial-gradient(10px 8px at 55% 72%, rgba(255,255,255,.06), transparent 60%),
    radial-gradient(12px 8px at 75% 74%, rgba(255,255,255,.06), transparent 60%);
  animation: dustDrift 8s ease-in-out infinite alternate;
}
@keyframes dustDrift{ 0%{ transform: translateY(0)} 100%{ transform: translateY(-6px)} }

/* podium hidden for act-2 */
.scene.act-2 .act2-podium, .scene.act-2 .act2-watcher, .scene.act-2 .gaze-svg{ display:none; }
.round-table{ position:absolute; left:50%; top:50%; transform: translate(-50%,-50%); width:320px; height:320px; pointer-events:none; z-index:2; }
.round-table .seat{ position:absolute; left:50%; top:50%; }

/* ================= Bubble (card) & Voice ================= */
.bubble-card{
  position:absolute;
  padding:12px 14px 14px 14px;
  border-radius:14px;
  background: var(--bubble-bg);
  border:1px solid var(--border);
  color: var(--bubble-text);
  backdrop-filter: blur(8px);
  box-shadow: 0 18px 60px -10px rgba(59,91,219,.35);
}
.bubble-card .bubble-text{ font-size: clamp(16px, 1.25vw, 19px); line-height:1.55; }
.bubble-card .caret{ margin-left:2px; animation: caretBlink 1s steps(1) infinite; }

.voice-btn{
  position:absolute; top:8px; right:8px;
  display:inline-flex; align-items:center; justify-content:center;
  width:28px; height:28px; border-radius:10px;
  background: rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.18);
  color: var(--muted);
}
.voice-btn:hover{ background: rgba(255,255,255,.12); }

/* Đảm bảo layer */
.map-box{ position:relative; z-index:10; }
.puppet-sprite{ position:relative; z-index:10; }
.puppet-wrap>.puppet-bubble{ z-index:30; }

/* Kéo rối lên trên để bubble không bị che */
.stage-left{
  display:flex; align-items:flex-start;
  padding-top:10px; padding-bottom:36px;
  min-height: clamp(380px, 44vw, 460px);
}
.puppet-wrap{ position:relative; display:inline-block; transform: translateY(-36px); }
.puppet-sprite{ position:relative; display:block; z-index:10; }
.puppet-wrap .puppet-bubble{
  position:absolute; z-index:40; bottom:auto;
  transform: translateY(-55%); max-width: clamp(320px, 42vw, 640px);
}

/* ========== LIGHT MODE TEXT/FORCE OVERRIDES ========== */
html:not(.dark) h1, html:not(.dark) h2, html:not(.dark) h3{ text-shadow:none; color: var(--text); }

/* ép các util text-white khi ở light */
html:not(.dark) .text-white,
html:not(.dark) [class*="text-white/"]{ color: var(--text) !important; }

.act1-bubble{ padding:14px 16px; filter: drop-shadow(0 12px 28px rgba(0,0,0,.45)); }
/* === THEME TOKENS (trung tính, KHÔNG xanh) === */
:root {
  --bgL1: #f3f5f9;   /* nền chính light (xám nhạt) */
  --bgL2: #e9edf4;   /* lớp trên light */
  --surfaceL: #ffffff;
  --inkL: #0b1220;

  --bgD1: #121418;   /* nền chính dark (xám than) */
  --bgD2: #0e1116;   /* lớp trên dark */
  --surfaceD: #161a20;
  --inkD: #e6e9ef;

  --accent: #7c89f8; /* chỉ dùng cho điểm nhấn nhỏ, KHÔNG nhuộm nền */
}

/* Nền tổng thể */
html:not(.dark) body {
  background: linear-gradient(180deg, var(--bgL2), var(--bgL1));
  color: var(--inkL);
}
html.dark body {
  background: linear-gradient(180deg, var(--bgD2), var(--bgD1));
  color: var(--inkD);
}

/* TRUNG HOÀ TOÀN BỘ NỀN XANH (quan trọng) */
html.dark .theater-stage,
html.dark .theater-backdrop,
html.dark .scene .scene-backdrop,
html.dark .stage-aurora::before,
html.dark .aura,
html.dark .spotlight,
html.dark .map-box {
  background: linear-gradient(180deg, var(--bgD2), var(--bgD1)) !important;
  box-shadow: none;
}
html:not(.dark) .theater-stage,
html:not(.dark) .theater-backdrop,
html:not(.dark) .scene .scene-backdrop,
html:not(.dark) .stage-aurora::before,
html:not(.dark) .aura,
html:not(.dark) .spotlight,
html:not(.dark) .map-box {
  background: linear-gradient(180deg, var(--bgL2), var(--bgL1)) !important;
  box-shadow: none;
}

/* Panel/cards: không trắng gắt ở light, không quá tối ở dark */
html:not(.dark) .hero-card,
html:not(.dark) .popup-card,
html:not(.dark) .panel-glass {
  background: color-mix(in srgb, var(--surfaceL) 92%, transparent) !important;
  border-color: rgba(2, 6, 23, .08) !important;
  color: var(--inkL) !important;
  backdrop-filter: saturate(1.05) blur(10px);
}
html.dark .hero-card,
html.dark .popup-card,
html.dark .panel-glass {
  background: color-mix(in srgb, var(--surfaceD) 86%, transparent) !important;
  border-color: rgba(255,255,255,.08) !important;
}

/* Ghost button trung tính (không dính palette xanh cũ) */
html:not(.dark) .btn-ghost {
  color: #0b1220 !important;
  border-color: rgba(2, 6, 23, .12) !important;
  background: rgba(2, 6, 23, .03) !important;
}
html:not(.dark) .btn-ghost:hover { background: rgba(2, 6, 23, .06) !important; }
html.dark .btn-ghost {
  color: #e6e9ef !important;
  border-color: rgba(255,255,255,.12) !important;
  background: rgba(255,255,255,.03) !important;
}
html.dark .btn-ghost:hover { background: rgba(255,255,255,.06) !important; }

/* Section divider: bỏ xanh, dùng xám */
html.dark .section-divider{
  background: linear-gradient(90deg, rgba(148,163,184,.25), transparent 30%, transparent 70%, rgba(148,163,184,.25)) !important;
}
html:not(.dark) .section-divider{
  background: linear-gradient(90deg, rgba(15,23,42,.08), transparent 30%, transparent 70%, rgba(15,23,42,.08)) !important;
}

/* Hover shadow trung tính, bỏ “hào quang xanh” */
.hero-card:hover { box-shadow: 0 10px 40px rgba(0,0,0,.35) !important; }
/* ==== HARD OVERRIDE cho dark: bỏ xanh, dùng xám trung tính ==== */
html.dark body {
  background: linear-gradient(180deg, #0e1116, #121418) !important;
  color: #e6e9ef !important;
}

html.dark .theater-stage,
html.dark .theater-backdrop,
html.dark .scene .scene-backdrop,
html.dark .stage-aurora::before,
html.dark .aura,
html.dark .spotlight,
html.dark .map-box {
  background: linear-gradient(180deg, #0e1116, #121418) !important;
  box-shadow: none !important;
  filter: none !important;
}

/* Nếu còn rule gradient xanh ở các act, triệt luôn */
html.dark .scene.act-1 .scene-backdrop,
html.dark .scene.act-2 .scene-backdrop,
html.dark .scene.act-3 .scene-backdrop,
html.dark .scene.act-4 .scene-backdrop {
  background: linear-gradient(180deg, #0e1116, #121418) !important;
}
/* ==== FORCE DARK OVERRIDE cuối cùng ==== */
html.dark body {
  background: linear-gradient(180deg, #0e1116, #121418) !important;
  color: #e6e9ef !important;
}

html.dark .theater-stage,
html.dark .theater-backdrop,
html.dark .scene .scene-backdrop {
  background: linear-gradient(180deg, #0e1116, #121418) !important;
  box-shadow: none !important;
  filter: none !important;
}
